<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yoga for Everyone</title>
    <link rel="stylesheet" href="yoga.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <p>Your Yoga Space</p>
        <hr>
        <nav>
            <ul style="display: flex">
                <div class="dropdown">
                    <div class="menu-button" onclick="toggleMenu()"><img src="profile.avif"></div>
                    <div id="menu" class="menu">
                        <ul class="profile" id="userProfile">
                            <li>Loading...</li>
                        </ul>
                    </div>
                </div>
                <div style="margin-left: auto;display: flex;"> 
                    <li><a href="yoga.html">HOME</a></li>
                    <li><a href="courses.html">COURSES</a></li>
                    <li><a href="yogabodyproblem.html">YOGA FOR BODY PAIN</a></li>
                    <li><a href="yogaasana.html">YOGA ASANAS</a></li>
                    <li><a href="blog.html">BLOG</a></li>
                    <li><a href="yogacontactus.html">CONTACT US</a></li>
                </div>
            </ul>
        </nav>
    </header>
    
    <main>
        <section id="intro">
            <h2>Discover the Benefits of Yoga</h2>
            <p style="color: whitesmoke;">Join us on a journey to improve your physical and mental well-being through yoga.</p>
        </section>
        
        <section id="featured">
            <h2>Featured Courses</h2>
            <p style="color: whitesmoke;">Explore our range of yoga courses designed for all levels.</p>
            <a href="courses.html">View Courses</a>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2025 Yoga for Everyone | All Rights Reserved</p>
    </footer>
    
    <!-- Firebase scripts -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js";
import { 
    getAuth, 
    onAuthStateChanged, 
    signOut, 
    setPersistence, 
    browserLocalPersistence 
} from "https://www.gstatic.com/firebasejs/10.10.0/firebase-auth.js";
import { getFirestore } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-firestore.js";

// Firebase configuration
const firebaseConfig = {
    apiKey: "AIzaSyCZmSzphanrYQC0FqTyR_OYKNB42wOythQ",
    authDomain: "manflowyoga-a36a7.firebaseapp.com",
    projectId: "manflowyoga-a36a7",
    storageBucket: "manflowyoga-a36a7.firebasestorage.app",
    messagingSenderId: "512748165114",
    appId: "1:512748165114:web:1906b5e8d9d83062c5f643"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// Set session persistence to LOCAL so users remain logged in
setPersistence(auth, browserLocalPersistence)
    .then(() => {
        console.log("Session persistence enabled.");
    })
    .catch((error) => {
        console.error("Error setting persistence:", error);
    });

// Check if a user is already logged in
onAuthStateChanged(auth, (user) => {
    if (user) {
        console.log("User is logged in:", user.email);

        // Update the profile dropdown dynamically
        const userProfile = document.getElementById("userProfile");
        userProfile.innerHTML = `
            <li>${user.displayName || "User"}</li>
            <li>${user.email}</li>
            <button id="logoutBtn">Logout</button>
        `;

        // Logout functionality
        document.getElementById("logoutBtn").addEventListener("click", async () => {
            try {
                await signOut(auth);
                alert("Logged out successfully.");
                window.location.href = "login.html"; // Redirect to login page after logout
            } catch (error) {
                console.error("Logout Error:", error);
                alert("Failed to log out. Try again.");
            }
        });

    }
});

    </script>
    
    <script>
        function toggleMenu() {
            var menu = document.getElementById("menu");
            menu.style.display = (menu.style.display === "block") ? "none" : "block";
        }
        
        document.addEventListener("click", function(event) {
            var menu = document.getElementById("menu");
            var button = document.querySelector(".menu-button");
            
            if (!menu.contains(event.target) && !button.contains(event.target)) {
                menu.style.display = "none";
            }
        });
    </script>
</body>
</html>
